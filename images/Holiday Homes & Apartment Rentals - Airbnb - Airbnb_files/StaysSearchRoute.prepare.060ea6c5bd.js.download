__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertToRawParams=v,e.default=void 0,e.getRawParamSingleValue=function(t,l){var u,n;return null!==(u=null===(n=(function(t,l){if(null!=t){const u=t.find(t=>(null==t?void 0:t.filterName)===l);if(null!=(null==u?void 0:u.filterValues)&&u.filterValues.length>0)return u.filterValues}return null})(t,l))||void 0===n?void 0:n[0])&&void 0!==u?u:null},e.merge=function(t,u,n){const{rawParams:o,...s}=t,{rawParams:f,...c}=u,p=new Set(Object.keys(n||{}).map(l.default)),y={};null==o||o.forEach(({filterName:t,filterValues:l})=>{t&&!p.has(t)&&(y[t]=l)}),null==f||f.forEach(({filterName:t,filterValues:l})=>{t&&(y[t]=l)});const R=b(Object.entries(y).map(([t,l])=>({filterName:t,filterValues:l})));return{...s,...c,rawParams:R}},e.selectFiltersFromURL=y,e.selectSearchFiltersForRequest=q;var t=babelHelpers.interopRequireDefault(r(d[0])),l=babelHelpers.interopRequireWildcard(r(d[1])),u=babelHelpers.interopRequireWildcard(r(d[2])),n=babelHelpers.interopRequireDefault(r(d[3])),o=r(d[4]),s=babelHelpers.interopRequireDefault(r(d[5])),f=r(d[6]);function c(n,o){return(0,l.snakeKeysToCamelKeys)((0,t.default)((0,u.coerceCorrectTypes)(n,{forRequest:!0}),o))}function p(l){return(0,t.default)((0,s.default)(l),f.KNOWN_SEARCH_QUERY_PARAMS)}function y({queryString:t}){const l={...p(t)};return{...(0,u.default)({...l})}}function R(t){return null==t?[]:Array.isArray(t)?t.flatMap(R):'string'==typeof t?[t]:[JSON.stringify(t)]}function v(t){const l=[];return Object.keys(t).forEach(u=>{const n=R(t[u]);l.push({filterName:u,filterValues:n})}),l}function b(t){const l=[...t];return l.sort((t,l)=>{var u,n;return(null!==(u=null==t?void 0:t.filterName)&&void 0!==u?u:'').localeCompare(null!==(n=null==l?void 0:l.filterName)&&void 0!==n?n:'')}),l}function q({location:u,exploreRequest:s,filterKeys:f}){const p=(0,n.default)(s,...f.map(l.default)),R=y({queryString:null==u?void 0:u.search}),q=(0,t.default)((0,o.camelKeysToSnakeKeys)(s),f);return{...c({...R.cursor&&{cursor:R.cursor},...q,raw_params:b(v(p))},f)}}var S=function({location:t,exploreRequest:l,requestedPageType:u}){return{requestedPageType:u,...q({location:t,exploreRequest:l,filterKeys:f.STAYS_SEARCH_FILTER_KEYS})}};e.default=S}),"4116b7",["760af4","920ad7","6f136c","a1244a","ba236d","99e500","988040"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({experimentName:l,exploreTreatments:u,renderingState:o,getErfServer:s}){const{treatmentName:f,log:p}=(0,n.default)(l,u)||{};f&&'manual'===p&&('server-render'===o?s(l):'client-render'===o&&t.default.logCustomHashing(l,f))};var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1]))}),"56ff6b",["52d64b","e1e17e"]);
__d((function(g,r,i,a,m,e,d){"use strict";let _;Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=e.HOMEPAGE_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=e.EXPERIENCES_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=e.DecomposeFeatureFlags=void 0,e.DecomposeFeatureFlags=_,(function(_){_.M2="decompose_stays_search_m2_treatment",_.M3="decompose_stays_search_m3_treatment",_.M3_5="decompose_stays_search_m3_5_treatment",_.M4="decompose_stays_search_m4_treatment",_.M5="decompose_experiences_search_m5_treatment",_.M7="decompose_stays_search_m7_treatment",_.M8="decompose_stays_search_m8_treatment"})(_||(e.DecomposeFeatureFlags=_={}));const E=[_.M4];e.HOMEPAGE_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=E;const t=[_.M2,_.M3,_.M3_5];e.STAYS_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=t;const s=[_.M5];e.EXPERIENCES_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=s}),"5c837c",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return t.default.get('exploreTreatments')||[]};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"6b9728",["05b07c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l=[]){const n=l.map(({treatmentFlag:t})=>t).filter(t.default).flat(1);return[...new Set(n)]};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"7ed684",["d89d24"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({location:c,cookie:b,niobeMinimalistClient:S,exploreTreatments:x,getRenderingState:T,customPrepareNiobeData:v,getErf:R}){const{isBotRequest:y,formFactor:E=n.DEFAULT_FORM_FACTOR}=v||{},h=(0,t.createTaskController)(),w=(0,p.default)({cookie:b,exploreTreatments:x,getRenderingState:T,location:c,niobeMinimalistClient:S,formFactor:E}),k=(0,o.default)(c.search),D=(0,s.getRedirectUrl)(c);let F=!1;y||(F=!0);f.forEach(t=>{(0,l.default)({experimentName:t,exploreTreatments:x,renderingState:T(),getErfServer:R})}),(0,_.isP2_5)(k)||(E===n.FORM_FACTOR.WIDE?((0,l.default)({experimentName:"feed_map_decoupling_m11_desktop",exploreTreatments:x,renderingState:T(),getErfServer:R}),(0,l.default)({experimentName:"map_prefetching_m3_desktop",exploreTreatments:x,renderingState:T(),getErfServer:R})):((0,l.default)({experimentName:"feed_map_decoupling_m11_moweb",exploreTreatments:x,renderingState:T(),getErfServer:R}),(0,l.default)({experimentName:"map_prefetching_m3_moweb",exploreTreatments:x,renderingState:T(),getErfServer:R})));(0,l.default)({experimentName:'bundled_category_bar_2022_with_category_bar_web_v2_aa',exploreTreatments:x,renderingState:T(),getErfServer:R});return(0,l.default)({experimentName:'bundled_category_bar_2022_with_category_bar_web_v2',exploreTreatments:x,renderingState:T(),getErfServer:R}),{queryRef:S.preloadQuery({context:{fetchOptions:{signal:null==h?void 0:h.signal},taskController:h},variables:w,query:u.default,deferrable:F,usePOSTForQuery:!0,skip:null!=D}),showDeferredSkeleton:F,redirectUrl:D}};var t=r(d[0]),n=r(d[1]),l=babelHelpers.interopRequireDefault(r(d[2])),o=babelHelpers.interopRequireDefault(r(d[3])),_=r(d[4]),s=r(d[5]),p=babelHelpers.interopRequireDefault(r(d[6])),u=babelHelpers.interopRequireDefault(r(d[7]));const f=['stays_search_m6_web','stays_search_m7_web']}),"884e0f",["cc3672","ab5cd2","56ff6b","99e500","8959ff","ee7519","a07100","f0b059"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.feedMapDecouplingHomepageWebPreSSR=function(n){return!(null==n||!n.includes("feed_map_decouple_homepage_treatment"))},e.feedMapDecouplingM11WebPreSSR=function(u,t){return!n(u)&&!(null==t||!t.includes("feed_map_decouple_m11_treatment"))},e.isP2_5=n;function n(n){return null!=n.omni_page_id&&null!=n.dynamic_product_ids}}),"8959ff",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_SEARCH_FILTER_KEYS=e.KNOWN_SEARCH_QUERY_PARAMS=void 0;const _=['cursor','autosuggestions_options','metadata_only','satori_version','search_type','source','treatment_flags','raw_params'];e.STAYS_SEARCH_FILTER_KEYS=_;const t=[..._,'inst','niobe_test_destinations','zoom'];e.KNOWN_SEARCH_QUERY_PARAMS=t}),"988040",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({exploreTreatments:p,location:_,formFactor:f}){const b=(0,l.default)(_.search),{mock:S}=b,E=f===u.FORM_FACTOR.COMPACT,M=(function(t){const l=new Set(['feed_map_decouple_homepage_desktop','feed_map_decouple_homepage_moweb']);return null==t?void 0:t.filter(({experiment:t})=>!l.has(t))})((function(t,l){if(l)return null==t?void 0:t.filter(({experiment:t})=>"new_filter_bar_search_feed_header_v2_desktop"!==t);return null==t?void 0:t.filter(({experiment:t})=>"new_filter_bar_v2_moweb"!==t)})(p,E)),R=[...s.STAYS_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS,...(0,n.default)(M)],h=(0,t.feedMapDecouplingM11WebPreSSR)(b,R),T=R.includes(s.DecomposeFeatureFlags.M8);if(S)return{exploreRequest:{},mockIdentifier:"ExplorePresentation/"+S,staysSearchM8Enabled:T,feedMapDecoupleEnabled:h};const q=(0,o.selectFiltersForRequest)({location:_,cdnCacheSafe:!1,cdnExperiments:void 0,treatmentFlags:R,isPWA:E}),A=(0,c.default)({location:_,requestedPageType:'STAYS_SEARCH',exploreRequest:q});return{staysSearchRequest:A,...h&&{staysMapSearchRequest:A},staysSearchM8Enabled:T,feedMapDecoupleEnabled:h}};var t=r(d[0]),l=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2])),o=r(d[3]),s=r(d[4]),u=r(d[5]),c=babelHelpers.interopRequireDefault(r(d[6]))}),"a07100",["8959ff","99e500","7ed684","72ad2c","5c837c","ab5cd2","4116b7"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,n=(0,t.default)()){return n.find(({experiment:t})=>t===u)};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"e1e17e",["6b9728"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={document:void 0,getDocument:()=>r(d[1])(d[0]).then(babelHelpers.interopRequireWildcard).then(t=>t.default),name:'StaysSearch',type:'query',operationId:'5ebe54d57045941a0631be4cb1ee03a8bd989a5b5666b2559947a1f94b536b09'};e.default=t}),"f0b059",["11efbe","b8ad06"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/stays-search/routes/StaysSearchRoute/StaysSearchRoute.prepare.2878136a84.js.map