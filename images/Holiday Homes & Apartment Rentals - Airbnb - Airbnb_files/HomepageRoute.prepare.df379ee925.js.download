__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({exploreTreatments:c=[],location:u,isPwa:f,cookie:p,forceFallbackHomepage:_=!1}){const{mock:h}=(0,t.default)(u.search);if(h)return{exploreRequest:{},mockIdentifier:"ExplorePresentation/"+h};const b='1'===p('hli'),x=s(c),k=(0,o.default)(x);_&&k.push('force_fallback_homepage');const v={isInitialLoad:!0,hasLoggedIn:b};return{...v,cdnCacheSafe:!1,source:'EXPLORE',exploreRequest:{...(0,n.selectFiltersForRequest)({location:u,cdnCacheSafe:!1,cdnExperiments:void 0,treatmentFlags:k,isPWA:f}),...v,isOnlineExperiences:!!u.pathname.match(l)}}},e.removeFilterBarV2Treatments=s;var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]),o=babelHelpers.interopRequireDefault(r(d[2]));const l=/\/s(\/[^/]+)?\/experiences\/online/;function s(t=[]){return t.filter(({experiment:t})=>"new_filter_bar_search_feed_header_v2_desktop"!==t&&"new_filter_bar_v2_moweb"!==t)}}),"2e6b13",["99e500","72ad2c","7ed684"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertToRawParams=v,e.default=void 0,e.getRawParamSingleValue=function(t,l){var u,n;return null!==(u=null===(n=(function(t,l){if(null!=t){const u=t.find(t=>(null==t?void 0:t.filterName)===l);if(null!=(null==u?void 0:u.filterValues)&&u.filterValues.length>0)return u.filterValues}return null})(t,l))||void 0===n?void 0:n[0])&&void 0!==u?u:null},e.merge=function(t,u,n){const{rawParams:o,...s}=t,{rawParams:f,...c}=u,p=new Set(Object.keys(n||{}).map(l.default)),y={};null==o||o.forEach(({filterName:t,filterValues:l})=>{t&&!p.has(t)&&(y[t]=l)}),null==f||f.forEach(({filterName:t,filterValues:l})=>{t&&(y[t]=l)});const R=b(Object.entries(y).map(([t,l])=>({filterName:t,filterValues:l})));return{...s,...c,rawParams:R}},e.selectFiltersFromURL=y,e.selectSearchFiltersForRequest=q;var t=babelHelpers.interopRequireDefault(r(d[0])),l=babelHelpers.interopRequireWildcard(r(d[1])),u=babelHelpers.interopRequireWildcard(r(d[2])),n=babelHelpers.interopRequireDefault(r(d[3])),o=r(d[4]),s=babelHelpers.interopRequireDefault(r(d[5])),f=r(d[6]);function c(n,o){return(0,l.snakeKeysToCamelKeys)((0,t.default)((0,u.coerceCorrectTypes)(n,{forRequest:!0}),o))}function p(l){return(0,t.default)((0,s.default)(l),f.KNOWN_SEARCH_QUERY_PARAMS)}function y({queryString:t}){const l={...p(t)};return{...(0,u.default)({...l})}}function R(t){return null==t?[]:Array.isArray(t)?t.flatMap(R):'string'==typeof t?[t]:[JSON.stringify(t)]}function v(t){const l=[];return Object.keys(t).forEach(u=>{const n=R(t[u]);l.push({filterName:u,filterValues:n})}),l}function b(t){const l=[...t];return l.sort((t,l)=>{var u,n;return(null!==(u=null==t?void 0:t.filterName)&&void 0!==u?u:'').localeCompare(null!==(n=null==l?void 0:l.filterName)&&void 0!==n?n:'')}),l}function q({location:u,exploreRequest:s,filterKeys:f}){const p=(0,n.default)(s,...f.map(l.default)),R=y({queryString:null==u?void 0:u.search}),q=(0,t.default)((0,o.camelKeysToSnakeKeys)(s),f);return{...c({...R.cursor&&{cursor:R.cursor},...q,raw_params:b(v(p))},f)}}var S=function({location:t,exploreRequest:l,requestedPageType:u}){return{requestedPageType:u,...q({location:t,exploreRequest:l,filterKeys:f.STAYS_SEARCH_FILTER_KEYS})}};e.default=S}),"4116b7",["760af4","920ad7","6f136c","a1244a","ba236d","99e500","988040"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({experimentName:l,exploreTreatments:u,renderingState:o,getErfServer:s}){const{treatmentName:f,log:p}=(0,n.default)(l,u)||{};f&&'manual'===p&&('server-render'===o?s(l):'client-render'===o&&t.default.logCustomHashing(l,f))};var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1]))}),"56ff6b",["52d64b","e1e17e"]);
__d((function(g,r,i,a,m,e,d){"use strict";let _;Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=e.HOMEPAGE_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=e.EXPERIENCES_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=e.DecomposeFeatureFlags=void 0,e.DecomposeFeatureFlags=_,(function(_){_.M2="decompose_stays_search_m2_treatment",_.M3="decompose_stays_search_m3_treatment",_.M3_5="decompose_stays_search_m3_5_treatment",_.M4="decompose_stays_search_m4_treatment",_.M5="decompose_experiences_search_m5_treatment",_.M7="decompose_stays_search_m7_treatment",_.M8="decompose_stays_search_m8_treatment"})(_||(e.DecomposeFeatureFlags=_={}));const E=[_.M4];e.HOMEPAGE_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=E;const t=[_.M2,_.M3,_.M3_5];e.STAYS_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=t;const s=[_.M5];e.EXPERIENCES_SEARCH_DECOMPOSE_COMPLETED_TREATMENT_FLAGS=s}),"5c837c",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return t.default.get('exploreTreatments')||[]};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"6b9728",["05b07c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l=[]){const n=l.map(({treatmentFlag:t})=>t).filter(t.default).flat(1);return[...new Set(n)]};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"7ed684",["d89d24"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.feedMapDecouplingHomepageWebPreSSR=function(n){return!(null==n||!n.includes("feed_map_decouple_homepage_treatment"))},e.feedMapDecouplingM11WebPreSSR=function(u,t){return!n(u)&&!(null==t||!t.includes("feed_map_decouple_m11_treatment"))},e.isP2_5=n;function n(n){return null!=n.omni_page_id&&null!=n.dynamic_product_ids}}),"8959ff",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_SEARCH_FILTER_KEYS=e.KNOWN_SEARCH_QUERY_PARAMS=void 0;const _=['cursor','autosuggestions_options','metadata_only','satori_version','search_type','source','treatment_flags','raw_params'];e.STAYS_SEARCH_FILTER_KEYS=_;const t=[..._,'inst','niobe_test_destinations','zoom'];e.KNOWN_SEARCH_QUERY_PARAMS=t}),"988040",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={document:void 0,getDocument:()=>r(d[1])(d[0]).then(babelHelpers.interopRequireWildcard).then(t=>t.default),name:'Homepage',type:'query',operationId:'7474b65ab6c6fd47215f4b126daf1496be672052aa9e07af5ee29c71a6778f6c'};e.default=t}),"ad7bb5",["9cce54","b8ad06"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRequestVariables=function({exploreTreatments:f,location:_,formFactor:E}){const R=(0,s.default)(_.search),{mock:P,campaign:b}=R,M=(function(t){const n=new Set(['feed_map_decoupling_m11_desktop','feed_map_decoupling_m11_moweb','map_prefetching_m3_desktop','map_prefetching_m3_moweb']);return null==t?void 0:t.filter(({experiment:t})=>!n.has(t))})((0,u.removeFilterBarV2Treatments)(f)),q=[...c.HOMEPAGE_DECOMPOSE_COMPLETED_TREATMENT_FLAGS,...(0,n.default)(M)],O=(0,o.feedMapDecouplingHomepageWebPreSSR)(q);if(P)return{mockIdentifier:"ExplorePresentation/"+P,feedMapDecoupleEnabled:O,isPaginatedRequest:!1};const T={surface:'HOMEPAGE',homepageParams:b?{campaign:b}:void 0},h=(0,t.selectFiltersForRequest)({location:_,cdnCacheSafe:!1,cdnExperiments:void 0,treatmentFlags:q,isPWA:E===p.FORM_FACTOR.COMPACT}),A=(0,l.default)({location:_,exploreRequest:h,requestedPageType:'HOMEPAGE'});return{staysSearchRequest:A,...O&&{staysMapSearchRequest:A},feedMapDecoupleEnabled:O,announcementRequest:T,isPaginatedRequest:!1}};var t=r(d[0]),n=babelHelpers.interopRequireDefault(r(d[1])),o=r(d[2]),s=babelHelpers.interopRequireDefault(r(d[3])),l=babelHelpers.interopRequireDefault(r(d[4])),u=r(d[5]),p=r(d[6]),c=r(d[7])}),"c24cb7",["72ad2c","7ed684","8959ff","99e500","4116b7","2e6b13","ab5cd2","5c837c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,n=(0,t.default)()){return n.find(({experiment:t})=>t===u)};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"e1e17e",["6b9728"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]),o=r(d[1]),l=babelHelpers.interopRequireDefault(r(d[2])),n=r(d[3]),u=babelHelpers.interopRequireDefault(r(d[4])),s=r(d[5]);var p=function({location:p,cookie:f,niobeMinimalistClient:c,exploreTreatments:_,getRenderingState:b,customPrepareNiobeData:R,getErf:T}){const{isBotRequest:v,formFactor:F=o.DEFAULT_FORM_FACTOR}=R||{},k=(0,t.createTaskController)(),x=(0,s.getRequestVariables)({cookie:f,exploreTreatments:_,location:p,formFactor:F}),O=(0,n.getRedirectUrl)(p);let S=!1;return v||(S=!0),F===o.FORM_FACTOR.WIDE?(0,l.default)({experimentName:"feed_map_decouple_homepage_desktop",exploreTreatments:_,renderingState:b(),getErfServer:T}):(0,l.default)({experimentName:"feed_map_decouple_homepage_moweb",exploreTreatments:_,renderingState:b(),getErfServer:T}),{queryRef:c.preloadQuery({context:{fetchOptions:{signal:null==k?void 0:k.signal},taskController:k},variables:x,query:u.default,deferrable:S,usePOSTForQuery:!0,skip:null!=O}),showDeferredSkeleton:S,redirectUrl:O}};e.default=p}),"f50540",["cc3672","ab5cd2","56ff6b","ee7519","ad7bb5","c24cb7"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/homepage/routes/HomepageRoute/HomepageRoute.prepare.57c431399f.js.map